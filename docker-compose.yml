services:
  base:
    image: logicourt-base:latest
    build:
      context: .
      dockerfile: Dockerfile.base
    command: echo "Base image built!"
  
    
  core:
    build:
      context: .  # 루트 컨텍스트로 변경
      dockerfile: core/Dockerfile
    depends_on:
      - base
    volumes:
      - .:/app  # 전체 프로젝트를 마운트
    command: streamlit run /app/core/chat.py  # 경로 정확히 지정
    ports:
      - "8501:8501"  # Streamlit 기본 포트
    # ports 설정 



  # rag:
  #   build:
  #     context: ./rag
  #     dockerfile: Dockerfile
  #   depends_on:
  #     - base

  # hardware:
  #   build:
  #     context: ./hardware
  #     dockerfile: Dockerfile
  #   depends_on:
  #     - base
